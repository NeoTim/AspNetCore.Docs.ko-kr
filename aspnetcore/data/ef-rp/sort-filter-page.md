---
title: 3부. ASP.NET Core에서 EF Core를 사용한 Razor Pages - 정렬, 필터, 페이징
author: rick-anderson
description: Razor Pages 및 Entity Framework 자습서 시리즈의 3부입니다.
ms.author: riande
ms.custom: mvc
ms.date: 07/22/2019
no-loc:
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: data/ef-rp/sort-filter-page
ms.openlocfilehash: 496221bb4e34e1f9e4177d1934786a77d8c9b411
ms.sourcegitcommit: 50e7c970f327dbe92d45eaf4c21caa001c9106d0
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/10/2020
ms.locfileid: "86212542"
---
# <a name="part-3-razor-pages-with-ef-core-in-aspnet-core---sort-filter-paging"></a><span data-ttu-id="6cbf3-103">3부. ASP.NET Core에서 EF Core를 사용한 Razor Pages - 정렬, 필터, 페이징</span><span class="sxs-lookup"><span data-stu-id="6cbf3-103">Part 3, Razor Pages with EF Core in ASP.NET Core - Sort, Filter, Paging</span></span>

<span data-ttu-id="6cbf3-104">작성자: [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT) 및 [Jon P Smith](https://twitter.com/thereformedprog)</span><span class="sxs-lookup"><span data-stu-id="6cbf3-104">By [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT), and [Jon P Smith](https://twitter.com/thereformedprog)</span></span>

[!INCLUDE [about the series](~/includes/RP-EF/intro.md)]

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="6cbf3-105">이 자습서에서는 학생 페이지에 정렬, 필터링 및 페이징 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-105">This tutorial adds sorting, filtering, and paging functionality to the Students pages.</span></span>

<span data-ttu-id="6cbf3-106">다음 그림은 완료된 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-106">The following illustration shows a completed page.</span></span> <span data-ttu-id="6cbf3-107">열 제목은 열을 정렬하는 클릭할 수 있는 링크입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-107">The column headings are clickable links to sort the column.</span></span> <span data-ttu-id="6cbf3-108">열 제목을 반복적으로 클릭하여 오름차순 및 내림차순으로 정렬 순서를 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-108">Click a column heading repeatedly to switch between ascending and descending sort order.</span></span>

![학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

## <a name="add-sorting"></a><span data-ttu-id="6cbf3-110">정렬 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-110">Add sorting</span></span>

<span data-ttu-id="6cbf3-111">*Pages/Students/Index.cshtml.cs*에 있는 코드를 다음 코드로 바꿔서 정렬을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-111">Replace the code in *Pages/Students/Index.cshtml.cs* with the following code to add sorting.</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_All&highlight=21-24,26,28-52)]

<span data-ttu-id="6cbf3-112">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-112">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-113">정렬 매개 변수를 포함할 속성을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-113">Adds properties to contain the sorting parameters.</span></span>
* <span data-ttu-id="6cbf3-114">`Student` 속성의 이름을 `Students`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-114">Changes the name of the `Student` property to `Students`.</span></span>
* <span data-ttu-id="6cbf3-115">`OnGetAsync` 메서드의 코드를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-115">Replaces the code in the `OnGetAsync` method.</span></span>

<span data-ttu-id="6cbf3-116">`OnGetAsync` 메서드는 URL의 쿼리 문자열에서 `sortOrder` 매개 변수를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-116">The `OnGetAsync` method receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="6cbf3-117">URL(쿼리 문자열 포함)은 [앵커 태그 도우미](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper)에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-117">The URL (including the query string) is generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper).</span></span>

<span data-ttu-id="6cbf3-118">`sortOrder` 매개 변수는 “Name” 또는 “Date”입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-118">The `sortOrder` parameter is either "Name" or "Date."</span></span> <span data-ttu-id="6cbf3-119">`sortOrder` 매개 변수의 뒤에 오는 “_desc”는 내림차순 순서를 지정하기 위한 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-119">The `sortOrder` parameter is optionally followed by "_desc" to specify descending order.</span></span> <span data-ttu-id="6cbf3-120">기본 정렬 순서는 오름차순입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-120">The default sort order is ascending.</span></span>

<span data-ttu-id="6cbf3-121">인덱스 페이지가 **학생** 링크에서 요청되는 경우 쿼리 문자열이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-121">When the Index page is requested from the **Students** link, there's no query string.</span></span> <span data-ttu-id="6cbf3-122">학생은 성 기준 오름차순으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-122">The students are displayed in ascending order by last name.</span></span> <span data-ttu-id="6cbf3-123">`switch` 문에서 성 기준 오름차순이 기본값(제어 이동 사례)입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-123">Ascending order by last name is the default (fall-through case) in the `switch` statement.</span></span> <span data-ttu-id="6cbf3-124">사용자가 열 제목 링크를 클릭하면 적절한 `sortOrder` 값이 쿼리 문자열 값에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-124">When the user clicks a column heading link, the appropriate `sortOrder` value is provided in the query string value.</span></span>

<span data-ttu-id="6cbf3-125">Razor Page에서 열 제목 하이퍼링크를 적절한 쿼리 문자열 값으로 구성하기 위해 `NameSort` 및 `DateSort`가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-125">`NameSort` and `DateSort` are used by the Razor Page to configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_Ternary)]

<span data-ttu-id="6cbf3-126">이 코드는 C# 조건 연산자 [?:](/dotnet/csharp/language-reference/operators/conditional-operator)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-126">The code uses the C# conditional operator [?:](/dotnet/csharp/language-reference/operators/conditional-operator).</span></span> <span data-ttu-id="6cbf3-127">`?:` 연산자는 피연산자 3개를 사용하는 삼항 연산자입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-127">The `?:` operator is a ternary operator (it takes three operands).</span></span> <span data-ttu-id="6cbf3-128">첫 번째 줄은 `sortOrder`가 null이거나 비어 있는 경우 `NameSort`가 “name_desc”로 설정되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-128">The first line specifies that when `sortOrder` is null or empty, `NameSort` is set to "name_desc."</span></span> <span data-ttu-id="6cbf3-129">`sortOrder`가 null 또는 비어 있지 **않은** 경우 `NameSort`는 빈 문자열로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-129">If `sortOrder` is **not** null or empty, `NameSort` is set to an empty string.</span></span>

<span data-ttu-id="6cbf3-130">이러한 두 명령문을 사용하면 페이지에서 다음과 같이 열 제목 하이퍼링크를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-130">These two statements enable the page to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="6cbf3-131">현재 정렬 순서</span><span class="sxs-lookup"><span data-stu-id="6cbf3-131">Current sort order</span></span>   | <span data-ttu-id="6cbf3-132">성 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="6cbf3-132">Last Name Hyperlink</span></span> | <span data-ttu-id="6cbf3-133">날짜 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="6cbf3-133">Date Hyperlink</span></span> |
|:--------------------:|:-------------------:|:--------------:|
| <span data-ttu-id="6cbf3-134">성 오름차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-134">Last Name ascending</span></span>  | <span data-ttu-id="6cbf3-135">descending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-135">descending</span></span>          | <span data-ttu-id="6cbf3-136">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-136">ascending</span></span>      |
| <span data-ttu-id="6cbf3-137">성 내림차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-137">Last Name descending</span></span> | <span data-ttu-id="6cbf3-138">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-138">ascending</span></span>           | <span data-ttu-id="6cbf3-139">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-139">ascending</span></span>      |
| <span data-ttu-id="6cbf3-140">날짜 오름차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-140">Date ascending</span></span>       | <span data-ttu-id="6cbf3-141">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-141">ascending</span></span>           | <span data-ttu-id="6cbf3-142">descending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-142">descending</span></span>     |
| <span data-ttu-id="6cbf3-143">날짜 내림차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-143">Date descending</span></span>      | <span data-ttu-id="6cbf3-144">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-144">ascending</span></span>           | <span data-ttu-id="6cbf3-145">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-145">ascending</span></span>      |

<span data-ttu-id="6cbf3-146">메서드는 LINQ to Entities를 사용하여 정렬할 기준이 되는 열을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-146">The method uses LINQ to Entities to specify the column to sort by.</span></span> <span data-ttu-id="6cbf3-147">코드는 `IQueryable<Student>`를 switch 문 앞에서 초기화하고 switch 문에서 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-147">The code initializes an `IQueryable<Student>` before the switch statement, and modifies it in the switch statement:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_IQueryable)]

<span data-ttu-id="6cbf3-148">`IQueryable`을 만들거나 수정하는 경우 데이터베이스에 쿼리가 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-148">When an`IQueryable` is created or modified, no query is sent to the database.</span></span> <span data-ttu-id="6cbf3-149">쿼리는 `IQueryable` 개체가 컬렉션으로 변환될 때까지 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-149">The query isn't executed until the `IQueryable` object is converted into a collection.</span></span> <span data-ttu-id="6cbf3-150">`ToListAsync`와 같은 메서드를 호출하면 `IQueryable`이 컬렉션으로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-150">`IQueryable` are converted to a collection by calling a method such as `ToListAsync`.</span></span> <span data-ttu-id="6cbf3-151">따라서 `IQueryable` 코드는 다음 명령문까지 실행되지 않는 단일 쿼리가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-151">Therefore, the `IQueryable` code results in a single query that's not executed until the following statement:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_SortOnlyRtn)]

<span data-ttu-id="6cbf3-152">`OnGetAsync`는 많은 수의 정렬 가능한 열이 포함된 자세한 정보를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-152">`OnGetAsync` could get verbose with a large number of sortable columns.</span></span> <span data-ttu-id="6cbf3-153">이 기능을 코딩하는 다른 방법에 대한 자세한 내용은 이 자습서 시리즈의 MVC 버전에서 [동적 LINQ를 사용하여 코드 단순화](xref:data/ef-mvc/advanced#dynamic-linq)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-153">For information about an alternative way to code this functionality, see [Use dynamic LINQ to simplify code](xref:data/ef-mvc/advanced#dynamic-linq) in the MVC version of this tutorial series.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-page"></a><span data-ttu-id="6cbf3-154">학생 인덱스 페이지에 열 제목 하이퍼링크 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-154">Add column heading hyperlinks to the Student Index page</span></span>

<span data-ttu-id="6cbf3-155">*Students/Index.cshtml*의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-155">Replace the code in *Students/Index.cshtml*, with the following code.</span></span> <span data-ttu-id="6cbf3-156">변경 내용은 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-156">The changes are highlighted.</span></span>

[!code-cshtml[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml?highlight=5,8,17-19,22,25-27,33)]

<span data-ttu-id="6cbf3-157">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-157">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-158">하이퍼링크를 `LastName` 및 `EnrollmentDate` 열 머리글에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-158">Adds hyperlinks to the `LastName` and `EnrollmentDate` column headings.</span></span>
* <span data-ttu-id="6cbf3-159">`NameSort` 및 `DateSort`의 정보를 사용하여 현재 정렬 순서 값으로 하이퍼링크를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-159">Uses the information in `NameSort` and `DateSort` to set up hyperlinks with the current sort order values.</span></span>
* <span data-ttu-id="6cbf3-160">페이지 제목을 인덱스에서 학생으로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-160">Changes the page heading from Index to Students.</span></span>
* <span data-ttu-id="6cbf3-161">`Model.Student`를 `Model.Students`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-161">Changes `Model.Student` to `Model.Students`.</span></span>

<span data-ttu-id="6cbf3-162">정렬이 작동하는지 확인하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-162">To verify that sorting works:</span></span>

* <span data-ttu-id="6cbf3-163">앱을 실행하고 **학생** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-163">Run the app and select the **Students** tab.</span></span>
* <span data-ttu-id="6cbf3-164">열 제목을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-164">Click the column headings.</span></span>

## <a name="add-filtering"></a><span data-ttu-id="6cbf3-165">필터링 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-165">Add filtering</span></span>

<span data-ttu-id="6cbf3-166">학생 인덱스 페이지에 필터링을 추가하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-166">To add filtering to the Students Index page:</span></span>

* <span data-ttu-id="6cbf3-167">텍스트 상자 및 전송 단추가 Razor 페이지에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-167">A text box and a submit button is added to the Razor Page.</span></span> <span data-ttu-id="6cbf3-168">텍스트 상자는 첫 번째 또는 마지막 이름에 검색 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-168">The text box supplies a search string on the first or last name.</span></span>
* <span data-ttu-id="6cbf3-169">페이지 모델이 텍스트 상자 값을 사용하도록 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-169">The page model is updated to use the text box value.</span></span>

### <a name="update-the-ongetasync-method"></a><span data-ttu-id="6cbf3-170">OnGetAsync 메서드 업데이트</span><span class="sxs-lookup"><span data-stu-id="6cbf3-170">Update the OnGetAsync method</span></span>

<span data-ttu-id="6cbf3-171">*Students/Index.cshtml.cs*에 있는 코드를 다음 코드로 바꿔서 필터링을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-171">Replace the code in *Students/Index.cshtml.cs* with the following code to add filtering:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index2.cshtml.cs?name=snippet_All&highlight=28,33,37-41)]

<span data-ttu-id="6cbf3-172">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-172">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-173">`searchString` 매개 변수를 `OnGetAsync` 메서드에 추가하고 매개 변수 값을 `CurrentFilter` 속성에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-173">Adds the `searchString` parameter to the `OnGetAsync` method, and saves the parameter value in the `CurrentFilter` property.</span></span> <span data-ttu-id="6cbf3-174">다음 섹션에서 추가되는 텍스트 상자에서 검색 문자열 값이 수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-174">The search string value is received from a text box that's added in the next section.</span></span>
* <span data-ttu-id="6cbf3-175">`Where` 절을 LINQ 문에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-175">Adds to the LINQ statement a `Where` clause.</span></span> <span data-ttu-id="6cbf3-176">`Where` 절은 이름 또는 성에 검색 문자열이 포함된 학생만 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-176">The `Where` clause selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="6cbf3-177">LINQ 문은 검색할 값이 있는 경우에만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-177">The LINQ statement is executed only if there's a value to search for.</span></span>

### <a name="iqueryable-vs-ienumerable"></a><span data-ttu-id="6cbf3-178">IQueryable 및 IEnumerable</span><span class="sxs-lookup"><span data-stu-id="6cbf3-178">IQueryable vs. IEnumerable</span></span>

<span data-ttu-id="6cbf3-179">이 코드는 `IQueryable` 개체에서 `Where` 메서드를 호출하고, 필터는 서버에서 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-179">The code calls the `Where` method on an `IQueryable` object, and the filter is processed on the server.</span></span> <span data-ttu-id="6cbf3-180">일부 시나리오에서 앱은 메모리 내 컬렉션에서 확장 메서드로 `Where` 메서드를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-180">In some scenarios, the app might be calling the `Where` method as an extension method on an in-memory collection.</span></span> <span data-ttu-id="6cbf3-181">예를 들어 `_context.Students`가 EF Core `DbSet`에서 `IEnumerable` 컬렉션을 반환하는 리포지토리 메서드로 변경되었다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-181">For example, suppose `_context.Students` changes from EF Core `DbSet` to a repository method that returns an `IEnumerable` collection.</span></span> <span data-ttu-id="6cbf3-182">결과는 일반적으로 동일하지만 경우에 따라 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-182">The result would normally be the same but in some cases may be different.</span></span>

<span data-ttu-id="6cbf3-183">예를 들어 `Contains`의 .NET Framework 구현은 기본적으로 대/소문자 구분 비교를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-183">For example, the .NET Framework implementation of `Contains` performs a case-sensitive comparison by default.</span></span> <span data-ttu-id="6cbf3-184">SQL Server에서 `Contains` 대/소문자 구분은 SQL Server 인스턴스의 컬렉션 설정에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-184">In SQL Server, `Contains` case-sensitivity is determined by the collation setting of the SQL Server instance.</span></span> <span data-ttu-id="6cbf3-185">SQL Server는 기본적으로 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-185">SQL Server defaults to case-insensitive.</span></span> <span data-ttu-id="6cbf3-186">SQLite는 기본적으로 대/소문자를 구분합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-186">SQLite defaults to case-sensitive.</span></span> <span data-ttu-id="6cbf3-187">`ToUpper`는 테스트가 명시적으로 대/소문자를 구분하지 않도록 하기 위해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-187">`ToUpper` could be called to make the test explicitly case-insensitive:</span></span>

```csharp
Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())`
```

<span data-ttu-id="6cbf3-188">앞의 코드는 `Where` 메서드가 `IEnumerable`에서 호출되거나 SQLite에서 실행되는 경우에도 필터가 대/소문자를 구분하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-188">The preceding code would ensure that the filter is case-insensitive even if the `Where` method is called on an `IEnumerable` or runs on SQLite.</span></span>

<span data-ttu-id="6cbf3-189">`Contains`가 `IEnumerable` 컬렉션에서 호출된 경우 .NET Core 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-189">When `Contains` is called on an `IEnumerable` collection, the .NET Core implementation is used.</span></span> <span data-ttu-id="6cbf3-190">`Contains`가 `IQueryable` 개체에서 호출된 경우 데이터베이스 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-190">When `Contains` is called on an `IQueryable` object, the database implementation is used.</span></span>

<span data-ttu-id="6cbf3-191">성능상 이유로, 일반적으로 `IQueryable`에 대해 `Contains`를 호출하는 것이 더 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-191">Calling `Contains` on an `IQueryable` is usually preferable for performance reasons.</span></span> <span data-ttu-id="6cbf3-192">`IQueryable`을 사용하면 필터링이 데이터베이스 서버에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-192">With `IQueryable`, the filtering is done by the database server.</span></span> <span data-ttu-id="6cbf3-193">`IEnumerable`이 먼저 만들어진 경우에는 먼저 데이터베이스 서버에서 모든 행이 반환되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-193">If an `IEnumerable` is created first, all the rows have to be returned from the database server.</span></span>

<span data-ttu-id="6cbf3-194">`ToUpper` 호출에 대한 성능 저하가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-194">There's a performance penalty for calling `ToUpper`.</span></span> <span data-ttu-id="6cbf3-195">`ToUpper` 코드는 TSQL SELECT 문의 WHERE 절에 함수를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-195">The `ToUpper` code adds a function in the WHERE clause of the TSQL SELECT statement.</span></span> <span data-ttu-id="6cbf3-196">추가된 함수는 최적화 프로그램이 인덱스를 사용하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-196">The added function prevents the optimizer from using an index.</span></span> <span data-ttu-id="6cbf3-197">SQL은 대/소문자를 구분하지 않도록 설치되어 있으므로 필요하지 않은 경우 `ToUpper` 호출을 피하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-197">Given that SQL is installed as case-insensitive, it's best to avoid the `ToUpper` call when it's not needed.</span></span>

<span data-ttu-id="6cbf3-198">자세한 내용은 [SQLite 공급자를 사용하여 대/소문자를 구분하지 않는 쿼리를 사용하는 방법](https://github.com/aspnet/EntityFrameworkCore/issues/11414)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-198">For more information, see [How to use case-insensitive query with Sqlite provider](https://github.com/aspnet/EntityFrameworkCore/issues/11414).</span></span>

### <a name="update-the-razor-page"></a><span data-ttu-id="6cbf3-199">Razor 페이지 업데이트</span><span class="sxs-lookup"><span data-stu-id="6cbf3-199">Update the Razor page</span></span>

<span data-ttu-id="6cbf3-200">*Pages/Students/Index.cshtml*의 코드를 바꿔서 **검색** 단추와 다양한 크롬을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-200">Replace the code in *Pages/Students/Index.cshtml* to create a **Search** button and assorted chrome.</span></span>

[!code-cshtml[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index2.cshtml?highlight=14-23)]

<span data-ttu-id="6cbf3-201">위의 코드는 `<form>` [태그 도우미](xref:mvc/views/tag-helpers/intro)를 사용하여 검색 텍스트 상자와 단추를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-201">The preceding code uses the `<form>` [tag helper](xref:mvc/views/tag-helpers/intro) to add the search text box and button.</span></span> <span data-ttu-id="6cbf3-202">기본적으로 `<form>` 태그 도우미는 POST로 양식 데이터를 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-202">By default, the `<form>` tag helper submits form data with a POST.</span></span> <span data-ttu-id="6cbf3-203">POST를 사용하면 매개 변수가 URL에 없는 HTTP 메시지 본문에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-203">With POST, the parameters are passed in the HTTP message body and not in the URL.</span></span> <span data-ttu-id="6cbf3-204">HTTP GET을 사용하는 경우 양식 데이터가 URL에 쿼리 문자열로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-204">When HTTP GET is used, the form data is passed in the URL as query strings.</span></span> <span data-ttu-id="6cbf3-205">사용자는 쿼리 문자열로 데이터를 전달하여 URL을 책갈피로 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-205">Passing the data with query strings enables users to bookmark the URL.</span></span> <span data-ttu-id="6cbf3-206">[W3C 지침](https://www.w3.org/2001/tag/doc/whenToUseGet.html)에 따라 작업이 업데이트되지 않을 때 GET을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-206">The [W3C guidelines](https://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that GET should be used when the action doesn't result in an update.</span></span>

<span data-ttu-id="6cbf3-207">앱을 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-207">Test the app:</span></span>

* <span data-ttu-id="6cbf3-208">**학생** 탭을 선택하고 검색 문자열을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-208">Select the **Students** tab and enter a search string.</span></span> <span data-ttu-id="6cbf3-209">SQLite를 사용하는 경우 필터는 앞에 표시된 선택적 `ToUpper` 코드를 구현한 경우에만 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-209">If you're using SQLite, the filter is case-insensitive only if you implemented the optional `ToUpper` code shown earlier.</span></span>

* <span data-ttu-id="6cbf3-210">**검색**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-210">Select **Search**.</span></span>

<span data-ttu-id="6cbf3-211">URL에 검색 문자열이 포함되어 있음을 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-211">Notice that the URL contains the search string.</span></span> <span data-ttu-id="6cbf3-212">예를 들어:</span><span class="sxs-lookup"><span data-stu-id="6cbf3-212">For example:</span></span>

```
https://localhost:<port>/Students?SearchString=an
```

<span data-ttu-id="6cbf3-213">페이지가 책갈피로 표시된 경우 책갈피에는 페이지에 대한 URL 및 `SearchString` 쿼리 문자열이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-213">If the page is bookmarked, the bookmark contains the URL to the page and the `SearchString` query string.</span></span> <span data-ttu-id="6cbf3-214">`form` 태그의 `method="get"`으로 인해 쿼리 문자열이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-214">The `method="get"` in the `form` tag is what caused the query string to be generated.</span></span>

<span data-ttu-id="6cbf3-215">현재 열 제목 정렬 링크를 선택하면 **검색** 상자에서 필터 값이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-215">Currently, when a column heading sort link is selected, the filter value from the **Search** box is lost.</span></span> <span data-ttu-id="6cbf3-216">손실된 필터 값은 다음 섹션에서 수정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-216">The lost filter value is fixed in the next section.</span></span>

## <a name="add-paging"></a><span data-ttu-id="6cbf3-217">페이징 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-217">Add paging</span></span>

<span data-ttu-id="6cbf3-218">이 섹션에서는 페이징을 지원하기 위해 `PaginatedList` 클래스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-218">In this section, a `PaginatedList` class is created to support paging.</span></span> <span data-ttu-id="6cbf3-219">`PaginatedList` 클래스는 `Skip` 및 `Take` 문을 사용하여 테이블의 모든 행을 검색하는 대신 서버에 있는 데이터를 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-219">The `PaginatedList` class uses `Skip` and `Take` statements to filter data on the server instead of retrieving all rows of the table.</span></span> <span data-ttu-id="6cbf3-220">다음 그림에는 페이징 단추가 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-220">The following illustration shows the paging buttons.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

### <a name="create-the-paginatedlist-class"></a><span data-ttu-id="6cbf3-222">PaginatedList 클래스 만들기</span><span class="sxs-lookup"><span data-stu-id="6cbf3-222">Create the PaginatedList class</span></span>

<span data-ttu-id="6cbf3-223">프로젝트 폴더에서 다음 코드로 `PaginatedList.cs`를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-223">In the project folder, create `PaginatedList.cs` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/PaginatedList.cs)]

<span data-ttu-id="6cbf3-224">이전 코드에서 `CreateAsync` 메서드는 페이지 크기 및 페이지 번호를 사용하고 적절한 `Skip` 및 `Take` 문을 `IQueryable`에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-224">The `CreateAsync` method in the preceding code takes page size and page number and applies the appropriate `Skip` and `Take` statements to the `IQueryable`.</span></span> <span data-ttu-id="6cbf3-225">`IQueryable`에서 `ToListAsync`를 호출하면 요청된 페이지만 포함하는 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-225">When `ToListAsync` is called on the `IQueryable`, it returns a List containing only the requested page.</span></span> <span data-ttu-id="6cbf3-226">**이전** 및 **다음** 페이징 단추를 사용 또는 사용하지 않도록 설정하는 데 `HasPreviousPage` 및 `HasNextPage` 속성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-226">The properties `HasPreviousPage` and `HasNextPage` are used to enable or disable **Previous** and **Next** paging buttons.</span></span>

<span data-ttu-id="6cbf3-227">`CreateAsync` 메서드는 `PaginatedList<T>`를 만드는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-227">The `CreateAsync` method is used to create the `PaginatedList<T>`.</span></span> <span data-ttu-id="6cbf3-228">생성자는 `PaginatedList<T>` 개체를 만들 수 없고 비동기 코드를 실행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-228">A constructor can't create the `PaginatedList<T>` object; constructors can't run asynchronous code.</span></span>

### <a name="add-paging-to-the-pagemodel-class"></a><span data-ttu-id="6cbf3-229">PageModel 클래스에 페이징 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-229">Add paging to the PageModel class</span></span>

<span data-ttu-id="6cbf3-230">*Students/Index.cshtml.cs*의 코드를 바꿔서 페이징을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-230">Replace the code in *Students/Index.cshtml.cs* to add paging.</span></span>

[!code-csharp[Main](intro/samples/cu30/Pages/Students/Index.cshtml.cs?name=snippet_All&highlight=26,28-29,31,34-41,68-70)]

<span data-ttu-id="6cbf3-231">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-231">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-232">`Students` 속성의 형식을 `IList<Student>`에서 `PaginatedList<Student>`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-232">Changes the type of the `Students` property from `IList<Student>` to `PaginatedList<Student>`.</span></span>
* <span data-ttu-id="6cbf3-233">페이지 인덱스, 현재 `sortOrder` 및 `currentFilter`를 `OnGetAsync` 메서드 시그니처에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-233">Adds the page index, the current `sortOrder`, and the `currentFilter` to the `OnGetAsync` method signature.</span></span>
* <span data-ttu-id="6cbf3-234">정렬 순서를 CurrentSort 속성에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-234">Saves the sort order in the CurrentSort property.</span></span>
* <span data-ttu-id="6cbf3-235">새 검색 문자열이 있는 경우 페이지 인덱스를 1로 다시 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-235">Resets page index to 1 when there's a new search string.</span></span>
* <span data-ttu-id="6cbf3-236">`PaginatedList` 클래스를 사용하여 Student 엔터티를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-236">Uses the `PaginatedList` class to get Student entities.</span></span>

<span data-ttu-id="6cbf3-237">다음과 같은 경우 `OnGetAsync`가 수신하는 모든 매개 변수는 Null입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-237">All the parameters that `OnGetAsync` receives are null when:</span></span>

* <span data-ttu-id="6cbf3-238">페이지가 **학생** 링크에서 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-238">The page is called from the **Students** link.</span></span>
* <span data-ttu-id="6cbf3-239">사용자가 페이징 또는 정렬 링크를 클릭하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-239">The user hasn't clicked a paging or sorting link.</span></span>

<span data-ttu-id="6cbf3-240">페이징 링크를 클릭하면 페이지 인덱스 변수에 표시할 페이지 번호가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-240">When a paging link is clicked, the page index variable contains the page number to display.</span></span>

<span data-ttu-id="6cbf3-241">`CurrentSort` 속성은 Razor Page에 현재 정렬 순서를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-241">The `CurrentSort` property provides the Razor Page with the current sort order.</span></span> <span data-ttu-id="6cbf3-242">현재 정렬 순서는 페이징하는 동안 정렬 순서를 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-242">The current sort order must be included in the paging links to keep the sort order while paging.</span></span>

<span data-ttu-id="6cbf3-243">`CurrentFilter` 속성은 Razor Page에 현재 필터 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-243">The `CurrentFilter` property provides the Razor Page with the current filter string.</span></span> <span data-ttu-id="6cbf3-244">`CurrentFilter` 값은:</span><span class="sxs-lookup"><span data-stu-id="6cbf3-244">The `CurrentFilter` value:</span></span>

* <span data-ttu-id="6cbf3-245">페이징하는 동안 필터 설정을 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-245">Must be included in the paging links in order to maintain the filter settings during paging.</span></span>
* <span data-ttu-id="6cbf3-246">페이지를 다시 표시하는 경우 텍스트 상자에 복원되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-246">Must be restored to the text box when the page is redisplayed.</span></span>

<span data-ttu-id="6cbf3-247">검색 문자열이 페이징하는 동안 변경되면 페이지가 1로 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-247">If the search string is changed while paging, the page is reset to 1.</span></span> <span data-ttu-id="6cbf3-248">새 필터로 인해 다른 데이터가 표시될 수 있으므로 페이지는 1로 재설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-248">The page has to be reset to 1 because the new filter can result in different data to display.</span></span> <span data-ttu-id="6cbf3-249">검색 값을 입력하는 경우 및 **전송**을 선택한 경우:</span><span class="sxs-lookup"><span data-stu-id="6cbf3-249">When a search value is entered and **Submit** is selected:</span></span>

  * <span data-ttu-id="6cbf3-250">검색 문자열이 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-250">The search string is changed.</span></span>
  * <span data-ttu-id="6cbf3-251">`searchString` 매개 변수가 null이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-251">The `searchString` parameter isn't null.</span></span>

  <span data-ttu-id="6cbf3-252">`PaginatedList.CreateAsync` 메서드가 학생 쿼리를 페이징을 지원하는 컬렉션 형식의 단일 학생 페이지로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-252">The `PaginatedList.CreateAsync` method converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="6cbf3-253">해당 단일 학생 페이지가 Razor 페이지에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-253">That single page of students is passed to the Razor Page.</span></span>

  <span data-ttu-id="6cbf3-254">`PaginatedList.CreateAsync`에서 `pageIndex` 뒤에 있는 두 개의 물음표는 [Null 병합 연산자](/dotnet/csharp/language-reference/operators/null-conditional-operator)를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-254">The two question marks after `pageIndex` in the `PaginatedList.CreateAsync` call represent the [null-coalescing operator](/dotnet/csharp/language-reference/operators/null-conditional-operator).</span></span> <span data-ttu-id="6cbf3-255">Null 병합 연산자는 null 허용 형식에 대한 기본값을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-255">The null-coalescing operator defines a default value for a nullable type.</span></span> <span data-ttu-id="6cbf3-256">식 `(pageIndex ?? 1)`은 값이 있는 경우 `pageIndex`의 값을 반환함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-256">The expression `(pageIndex ?? 1)` means return the value of `pageIndex` if it has a value.</span></span> <span data-ttu-id="6cbf3-257">`pageIndex`에 값이 없으면 1을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-257">If `pageIndex` doesn't have a value, return 1.</span></span>

### <a name="add-paging-links-to-the-razor-page"></a><span data-ttu-id="6cbf3-258">Razor Page에 페이징 링크 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-258">Add paging links to the Razor Page</span></span>

<span data-ttu-id="6cbf3-259">*Students/Index.cshtml*의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-259">Replace the code in *Students/Index.cshtml* with the following code.</span></span> <span data-ttu-id="6cbf3-260">변경 내용이 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-260">The changes are highlighted:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?highlight=29-32,38-41,69-87)]

<span data-ttu-id="6cbf3-261">열 머리글 링크는 쿼리 문자열을 사용하여 현재 검색 문자열을 `OnGetAsync` 메서드에 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-261">The column header links use the query string to pass the current search string to the `OnGetAsync` method:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?range=29-32)]

<span data-ttu-id="6cbf3-262">태그 도우미에 페이징 단추가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-262">The paging buttons are displayed by tag helpers:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?range=73-87)]

<span data-ttu-id="6cbf3-263">앱을 실행하고 학생 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-263">Run the app and navigate to the students page.</span></span>

* <span data-ttu-id="6cbf3-264">페이징이 작동하는지 확인하려면 다른 정렬 순서의 페이징 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-264">To make sure paging works, click the paging links in different sort orders.</span></span>
* <span data-ttu-id="6cbf3-265">정렬 및 필터링을 통해 페이징이 제대로 작동하는지 확인하려면 검색 문자열을 입력하고 페이징을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-265">To verify that paging works correctly with sorting and filtering, enter a search string and try paging.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

## <a name="add-grouping"></a><span data-ttu-id="6cbf3-267">그룹화 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-267">Add grouping</span></span>

<span data-ttu-id="6cbf3-268">이 섹션에서는 각 등록 날짜에 대해 등록한 학생 수를 표시하는 정보 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-268">This section creates an About page that displays how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="6cbf3-269">업데이트는 그룹화를 사용하며 다음 단계를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-269">The update uses grouping and includes the following steps:</span></span>

* <span data-ttu-id="6cbf3-270">**정보** 페이지에서 사용되는 데이터에 대한 뷰 모델을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-270">Create a view model for the data used by the **About** page.</span></span>
* <span data-ttu-id="6cbf3-271">정보 페이지를 업데이트하여 보기 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-271">Update the About page to use the view model.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="6cbf3-272">뷰 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="6cbf3-272">Create the view model</span></span>

<span data-ttu-id="6cbf3-273">*Models/SchoolViewModels* 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-273">Create a *Models/SchoolViewModels* folder.</span></span>

<span data-ttu-id="6cbf3-274">다음 코드로 *SchoolViewModels/EnrollmentDateGroup.cs*를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-274">Create *SchoolViewModels/EnrollmentDateGroup.cs* with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/Models/SchoolViewModels/EnrollmentDateGroup.cs)]

### <a name="create-the-razor-page"></a><span data-ttu-id="6cbf3-275">Razor Page 만들기</span><span class="sxs-lookup"><span data-stu-id="6cbf3-275">Create the Razor Page</span></span>

<span data-ttu-id="6cbf3-276">다음 코드로 *Pages/About.cshtml* 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-276">Create a *Pages/About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/About.cshtml)]

### <a name="create-the-page-model"></a><span data-ttu-id="6cbf3-277">페이지 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="6cbf3-277">Create the page model</span></span>

<span data-ttu-id="6cbf3-278">다음 코드로 *Pages/About.cshtml.cs* 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-278">Create a *Pages/About.cshtml.cs* file with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/Pages/About.cshtml.cs)]

<span data-ttu-id="6cbf3-279">LINQ 문은 등록 날짜별로 학생 엔터티를 그룹화하고 각 그룹의 엔터티 수를 계산하며 결과를 `EnrollmentDateGroup` 뷰 모델 개체의 컬렉션에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-279">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="6cbf3-280">앱을 실행하고 정보 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-280">Run the app and navigate to the About page.</span></span> <span data-ttu-id="6cbf3-281">각 등록 날짜에 대한 학생 수가 테이블에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-281">The count of students for each enrollment date is displayed in a table.</span></span>

![정보 페이지](sort-filter-page/_static/about30.png)

## <a name="next-steps"></a><span data-ttu-id="6cbf3-283">다음 단계</span><span class="sxs-lookup"><span data-stu-id="6cbf3-283">Next steps</span></span>

<span data-ttu-id="6cbf3-284">다음 자습서에서는 앱은 마이그레이션을 사용하여 데이터 모델을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-284">In the next tutorial, the app uses migrations to update the data model.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6cbf3-285">[이전 자습서](xref:data/ef-rp/crud)
> [다음 자습서](xref:data/ef-rp/migrations)</span><span class="sxs-lookup"><span data-stu-id="6cbf3-285">[Previous tutorial](xref:data/ef-rp/crud)
[Next tutorial](xref:data/ef-rp/migrations)</span></span>

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="6cbf3-286">이 자습서에서는 정렬, 필터링, 그룹화 및 페이징 기능이 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-286">In this tutorial, sorting, filtering, grouping, and paging, functionality is added.</span></span>

<span data-ttu-id="6cbf3-287">다음 그림은 완료된 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-287">The following illustration shows a completed page.</span></span> <span data-ttu-id="6cbf3-288">열 제목은 열을 정렬하는 클릭할 수 있는 링크입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-288">The column headings are clickable links to sort the column.</span></span> <span data-ttu-id="6cbf3-289">열 제목을 반복적으로 클릭하면 오름차순과 내림차순 정렬 순서 사이로 전환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-289">Clicking a column heading repeatedly switches between ascending and descending sort order.</span></span>

![학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="6cbf3-291">해결할 수 없는 문제가 발생한 경우 [완성된 앱](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples)을 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-291">If you run into problems you can't solve, download the [completed app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples).</span></span>

## <a name="add-sorting-to-the-index-page"></a><span data-ttu-id="6cbf3-292">인덱스 페이지에 정렬 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-292">Add sorting to the Index page</span></span>

<span data-ttu-id="6cbf3-293">정렬 매개 변수를 포함할 *Students/Index.cshtml.cs* `PageModel`에 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-293">Add strings to the *Students/Index.cshtml.cs* `PageModel` to contain the sorting parameters:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet1&highlight=10-13)]

<span data-ttu-id="6cbf3-294">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-294">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly)]

<span data-ttu-id="6cbf3-295">이전 코드는 URL의 쿼리 문자열에서 `sortOrder` 매개 변수를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-295">The preceding code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="6cbf3-296">URL(쿼리 문자열 포함)이 [앵커 태그 도우미](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-296">The URL (including the query string) is generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)</span></span>

<span data-ttu-id="6cbf3-297">`sortOrder` 매개 변수는 “Name” 또는 “Date”입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-297">The `sortOrder` parameter is either "Name" or "Date."</span></span> <span data-ttu-id="6cbf3-298">`sortOrder` 매개 변수의 뒤에 오는 “_desc”는 내림차순 순서를 지정하기 위한 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-298">The `sortOrder` parameter is optionally followed by "_desc" to specify descending order.</span></span> <span data-ttu-id="6cbf3-299">기본 정렬 순서는 오름차순입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-299">The default sort order is ascending.</span></span>

<span data-ttu-id="6cbf3-300">인덱스 페이지가 **학생** 링크에서 요청되는 경우 쿼리 문자열이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-300">When the Index page is requested from the **Students** link, there's no query string.</span></span> <span data-ttu-id="6cbf3-301">학생은 성 기준 오름차순으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-301">The students are displayed in ascending order by last name.</span></span> <span data-ttu-id="6cbf3-302">`switch` 문에서 성 기준 오름차순이 기본값(제어 이동 사례)입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-302">Ascending order by last name is the default (fall-through case) in the `switch` statement.</span></span> <span data-ttu-id="6cbf3-303">사용자가 열 제목 링크를 클릭하면 적절한 `sortOrder` 값이 쿼리 문자열 값에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-303">When the user clicks a column heading link, the appropriate `sortOrder` value is provided in the query string value.</span></span>

<span data-ttu-id="6cbf3-304">Razor Page에서 열 제목 하이퍼링크를 적절한 쿼리 문자열 값으로 구성하기 위해 `NameSort` 및 `DateSort`가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-304">`NameSort` and `DateSort` are used by the Razor Page to configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=3-4)]

<span data-ttu-id="6cbf3-305">다음 코드는 C# 조건적 [?: 연산자](/dotnet/csharp/language-reference/operators/conditional-operator)를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-305">The following code contains the C# conditional [?: operator](/dotnet/csharp/language-reference/operators/conditional-operator):</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_Ternary)]

<span data-ttu-id="6cbf3-306">첫 번째 줄은 `sortOrder`가 null이거나 비어 있는 경우 `NameSort`가 “name_desc”로 설정되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-306">The first line specifies that when `sortOrder` is null or empty, `NameSort` is set to "name_desc."</span></span> <span data-ttu-id="6cbf3-307">`sortOrder`가 null 또는 비어 있지 **않은** 경우 `NameSort`는 빈 문자열로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-307">If `sortOrder` is **not** null or empty, `NameSort` is set to an empty string.</span></span>

<span data-ttu-id="6cbf3-308">`?: operator`는 삼진 연산자라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-308">The `?: operator` is also known as the ternary operator.</span></span>

<span data-ttu-id="6cbf3-309">이러한 두 명령문을 사용하면 페이지에서 다음과 같이 열 제목 하이퍼링크를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-309">These two statements enable the page to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="6cbf3-310">현재 정렬 순서</span><span class="sxs-lookup"><span data-stu-id="6cbf3-310">Current sort order</span></span> | <span data-ttu-id="6cbf3-311">성 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="6cbf3-311">Last Name Hyperlink</span></span> | <span data-ttu-id="6cbf3-312">날짜 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="6cbf3-312">Date Hyperlink</span></span> |
|:--------------------:|:-------------------:|:--------------:|
| <span data-ttu-id="6cbf3-313">성 오름차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-313">Last Name ascending</span></span> | <span data-ttu-id="6cbf3-314">descending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-314">descending</span></span>        | <span data-ttu-id="6cbf3-315">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-315">ascending</span></span>      |
| <span data-ttu-id="6cbf3-316">성 내림차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-316">Last Name descending</span></span> | <span data-ttu-id="6cbf3-317">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-317">ascending</span></span>           | <span data-ttu-id="6cbf3-318">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-318">ascending</span></span>      |
| <span data-ttu-id="6cbf3-319">날짜 오름차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-319">Date ascending</span></span>       | <span data-ttu-id="6cbf3-320">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-320">ascending</span></span>           | <span data-ttu-id="6cbf3-321">descending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-321">descending</span></span>     |
| <span data-ttu-id="6cbf3-322">날짜 내림차순</span><span class="sxs-lookup"><span data-stu-id="6cbf3-322">Date descending</span></span>      | <span data-ttu-id="6cbf3-323">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-323">ascending</span></span>           | <span data-ttu-id="6cbf3-324">ascending</span><span class="sxs-lookup"><span data-stu-id="6cbf3-324">ascending</span></span>      |

<span data-ttu-id="6cbf3-325">메서드는 LINQ to Entities를 사용하여 정렬할 기준이 되는 열을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-325">The method uses LINQ to Entities to specify the column to sort by.</span></span> <span data-ttu-id="6cbf3-326">코드는 `IQueryable<Student>`를 switch 문 앞에서 초기화하고 switch 문에서 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-326">The code initializes an `IQueryable<Student>` before the switch statement, and modifies it in the switch statement:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=6-999)]

 <span data-ttu-id="6cbf3-327">`IQueryable`을 만들거나 수정하는 경우 데이터베이스에 쿼리가 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-327">When an`IQueryable` is created or modified, no query is sent to the database.</span></span> <span data-ttu-id="6cbf3-328">쿼리는 `IQueryable` 개체가 컬렉션으로 변환될 때까지 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-328">The query isn't executed until the `IQueryable` object is converted into a collection.</span></span> <span data-ttu-id="6cbf3-329">`ToListAsync`와 같은 메서드를 호출하면 `IQueryable`이 컬렉션으로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-329">`IQueryable` are converted to a collection by calling a method such as `ToListAsync`.</span></span> <span data-ttu-id="6cbf3-330">따라서 `IQueryable` 코드는 다음 명령문까지 실행되지 않는 단일 쿼리가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-330">Therefore, the `IQueryable` code results in a single query that's not executed until the following statement:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnlyRtn)]

<span data-ttu-id="6cbf3-331">`OnGetAsync`는 많은 수의 정렬 가능한 열이 포함된 자세한 정보를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-331">`OnGetAsync` could get verbose with a large number of sortable columns.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-page"></a><span data-ttu-id="6cbf3-332">학생 인덱스 페이지에 열 제목 하이퍼링크 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-332">Add column heading hyperlinks to the Student Index page</span></span>

<span data-ttu-id="6cbf3-333">*Students/Index.cshtml*의 코드를 다음 강조 표시된 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-333">Replace the code in *Students/Index.cshtml*, with the following highlighted code:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index2.cshtml?highlight=17-19,25-27)]

<span data-ttu-id="6cbf3-334">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-334">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-335">하이퍼링크를 `LastName` 및 `EnrollmentDate` 열 머리글에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-335">Adds hyperlinks to the `LastName` and `EnrollmentDate` column headings.</span></span>
* <span data-ttu-id="6cbf3-336">`NameSort` 및 `DateSort`의 정보를 사용하여 현재 정렬 순서 값으로 하이퍼링크를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-336">Uses the information in `NameSort` and `DateSort` to set up hyperlinks with the current sort order values.</span></span>

<span data-ttu-id="6cbf3-337">정렬이 작동하는지 확인하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-337">To verify that sorting works:</span></span>

* <span data-ttu-id="6cbf3-338">앱을 실행하고 **학생** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-338">Run the app and select the **Students** tab.</span></span>
* <span data-ttu-id="6cbf3-339">**성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-339">Click **Last Name**.</span></span>
* <span data-ttu-id="6cbf3-340">**등록 날짜**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-340">Click **Enrollment Date**.</span></span>

<span data-ttu-id="6cbf3-341">코드를 더 잘 이해하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-341">To get a better understanding of the code:</span></span>

* <span data-ttu-id="6cbf3-342">*Students/Index.cshtml.cs*에서 `switch (sortOrder)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-342">In *Students/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="6cbf3-343">`NameSort` 및 `DateSort`에 대한 조사식을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-343">Add a watch for `NameSort` and `DateSort`.</span></span>
* <span data-ttu-id="6cbf3-344">*Students/Index.cshtml*에서 `@Html.DisplayNameFor(model => model.Student[0].LastName)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-344">In *Students/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="6cbf3-345">디버거를 단계별로 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-345">Step through the debugger.</span></span>

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="6cbf3-346">학생 인덱스 페이지에 검색 상자 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-346">Add a Search Box to the Students Index page</span></span>

<span data-ttu-id="6cbf3-347">학생 인덱스 페이지에 필터링을 추가하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-347">To add filtering to the Students Index page:</span></span>

* <span data-ttu-id="6cbf3-348">텍스트 상자 및 전송 단추가 Razor 페이지에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-348">A text box and a submit button is added to the Razor Page.</span></span> <span data-ttu-id="6cbf3-349">텍스트 상자는 첫 번째 또는 마지막 이름에 검색 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-349">The text box supplies a search string on the first or last name.</span></span>
* <span data-ttu-id="6cbf3-350">페이지 모델이 텍스트 상자 값을 사용하도록 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-350">The page model is updated to use the text box value.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="6cbf3-351">인덱스 메서드에 필터링 기능 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-351">Add filtering functionality to the Index method</span></span>

<span data-ttu-id="6cbf3-352">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-352">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilter&highlight=1,5,9-13)]

<span data-ttu-id="6cbf3-353">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="6cbf3-353">The preceding code:</span></span>

* <span data-ttu-id="6cbf3-354">`searchString` 매개 변수를 `OnGetAsync` 메서드에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-354">Adds the `searchString` parameter to the `OnGetAsync` method.</span></span> <span data-ttu-id="6cbf3-355">다음 섹션에서 추가되는 텍스트 상자에서 검색 문자열 값이 수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-355">The search string value is received from a text box that's added in the next section.</span></span>
* <span data-ttu-id="6cbf3-356">LINQ 문 및 `Where` 절을 추가했습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-356">Added to the LINQ statement a `Where` clause.</span></span> <span data-ttu-id="6cbf3-357">`Where` 절은 이름 또는 성에 검색 문자열이 포함된 학생만 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-357">The `Where` clause selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="6cbf3-358">LINQ 문은 검색할 값이 있는 경우에만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-358">The LINQ statement is executed only if there's a value to search for.</span></span>

<span data-ttu-id="6cbf3-359">참고: 이전 코드는 `IQueryable` 개체에서 `Where` 메서드를 호출하고, 필터는 서버에서 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-359">Note: The preceding code calls the `Where` method on an `IQueryable` object, and the filter is processed on the server.</span></span> <span data-ttu-id="6cbf3-360">일부 시나리오에서 앱은 메모리 내 컬렉션에서 확장 메서드로 `Where` 메서드를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-360">In some scenarios, the app might be calling the `Where` method as an extension method on an in-memory collection.</span></span> <span data-ttu-id="6cbf3-361">예를 들어 `_context.Students`가 EF Core `DbSet`에서 `IEnumerable` 컬렉션을 반환하는 리포지토리 메서드로 변경되었다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-361">For example, suppose `_context.Students` changes from EF Core `DbSet` to a repository method that returns an `IEnumerable` collection.</span></span> <span data-ttu-id="6cbf3-362">결과는 일반적으로 동일하지만 경우에 따라 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-362">The result would normally be the same but in some cases may be different.</span></span>

<span data-ttu-id="6cbf3-363">예를 들어 `Contains`의 .NET Framework 구현은 기본적으로 대/소문자 구분 비교를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-363">For example, the .NET Framework implementation of `Contains` performs a case-sensitive comparison by default.</span></span> <span data-ttu-id="6cbf3-364">SQL Server에서 `Contains` 대/소문자 구분은 SQL Server 인스턴스의 컬렉션 설정에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-364">In SQL Server, `Contains` case-sensitivity is determined by the collation setting of the SQL Server instance.</span></span> <span data-ttu-id="6cbf3-365">SQL Server는 기본적으로 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-365">SQL Server defaults to case-insensitive.</span></span> <span data-ttu-id="6cbf3-366">`ToUpper`는 테스트가 명시적으로 대/소문자를 구분하지 않도록 하기 위해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-366">`ToUpper` could be called to make the test explicitly case-insensitive:</span></span>

`Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())`

<span data-ttu-id="6cbf3-367">위의 코드는 코드가 `IEnumerable`을 사용하도록 변경된 경우 결과가 대/소문자를 구분하지 않는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-367">The preceding code would ensure that results are case-insensitive if the code changes to use `IEnumerable`.</span></span> <span data-ttu-id="6cbf3-368">`Contains`가 `IEnumerable` 컬렉션에서 호출된 경우 .NET Core 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-368">When `Contains` is called on an `IEnumerable` collection, the .NET Core implementation is used.</span></span> <span data-ttu-id="6cbf3-369">`Contains`가 `IQueryable` 개체에서 호출된 경우 데이터베이스 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-369">When `Contains` is called on an `IQueryable` object, the database implementation is used.</span></span> <span data-ttu-id="6cbf3-370">리포지토리에서 `IEnumerable`을 반환하면 상당한 성능 저하가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-370">Returning an `IEnumerable` from a repository can have a significant performance penalty:</span></span>

1. <span data-ttu-id="6cbf3-371">모든 행이 DB 서버에서 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-371">All the rows are returned from the DB server.</span></span>
1. <span data-ttu-id="6cbf3-372">필터는 애플리케이션에서 반환된 모든 행에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-372">The filter is applied to all the returned rows in the application.</span></span>

<span data-ttu-id="6cbf3-373">`ToUpper` 호출에 대한 성능 저하가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-373">There's a performance penalty for calling `ToUpper`.</span></span> <span data-ttu-id="6cbf3-374">`ToUpper` 코드는 TSQL SELECT 문의 WHERE 절에 함수를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-374">The `ToUpper` code adds a function in the WHERE clause of the TSQL SELECT statement.</span></span> <span data-ttu-id="6cbf3-375">추가된 함수는 최적화 프로그램이 인덱스를 사용하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-375">The added function prevents the optimizer from using an index.</span></span> <span data-ttu-id="6cbf3-376">SQL은 대/소문자를 구분하지 않도록 설치되어 있으므로 필요하지 않은 경우 `ToUpper` 호출을 피하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-376">Given that SQL is installed as case-insensitive, it's best to avoid the `ToUpper` call when it's not needed.</span></span>

### <a name="add-a-search-box-to-the-student-index-page"></a><span data-ttu-id="6cbf3-377">학생 인덱스 페이지에 검색 상자 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-377">Add a Search Box to the Student Index page</span></span>

<span data-ttu-id="6cbf3-378">*Pages/Students/Index.cshtml*에서 다음 강조 표시된 코드를 추가하여 **검색** 단추와 다양한 크롬을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-378">In *Pages/Students/Index.cshtml*, add the following highlighted code to create a **Search** button and assorted chrome.</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index3.cshtml?highlight=14-23&range=1-25)]

<span data-ttu-id="6cbf3-379">위의 코드는 `<form>` [태그 도우미](xref:mvc/views/tag-helpers/intro)를 사용하여 검색 텍스트 상자와 단추를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-379">The preceding code uses the `<form>` [tag helper](xref:mvc/views/tag-helpers/intro) to add the search text box and button.</span></span> <span data-ttu-id="6cbf3-380">기본적으로 `<form>` 태그 도우미는 POST로 양식 데이터를 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-380">By default, the `<form>` tag helper submits form data with a POST.</span></span> <span data-ttu-id="6cbf3-381">POST를 사용하면 매개 변수가 URL에 없는 HTTP 메시지 본문에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-381">With POST, the parameters are passed in the HTTP message body and not in the URL.</span></span> <span data-ttu-id="6cbf3-382">HTTP GET을 사용하는 경우 양식 데이터가 URL에 쿼리 문자열로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-382">When HTTP GET is used, the form data is passed in the URL as query strings.</span></span> <span data-ttu-id="6cbf3-383">사용자는 쿼리 문자열로 데이터를 전달하여 URL을 책갈피로 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-383">Passing the data with query strings enables users to bookmark the URL.</span></span> <span data-ttu-id="6cbf3-384">[W3C 지침](https://www.w3.org/2001/tag/doc/whenToUseGet.html)에 따라 작업이 업데이트되지 않을 때 GET을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-384">The [W3C guidelines](https://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that GET should be used when the action doesn't result in an update.</span></span>

<span data-ttu-id="6cbf3-385">앱을 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-385">Test the app:</span></span>

* <span data-ttu-id="6cbf3-386">**학생** 탭을 선택하고 검색 문자열을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-386">Select the **Students** tab and enter a search string.</span></span>
* <span data-ttu-id="6cbf3-387">**검색**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-387">Select **Search**.</span></span>

<span data-ttu-id="6cbf3-388">URL에 검색 문자열이 포함되어 있음을 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-388">Notice that the URL contains the search string.</span></span>

```html
http://localhost:5000/Students?SearchString=an
```

<span data-ttu-id="6cbf3-389">페이지가 책갈피로 표시된 경우 책갈피에는 페이지에 대한 URL 및 `SearchString` 쿼리 문자열이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-389">If the page is bookmarked, the bookmark contains the URL to the page and the `SearchString` query string.</span></span> <span data-ttu-id="6cbf3-390">`form` 태그의 `method="get"`으로 인해 쿼리 문자열이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-390">The `method="get"` in the `form` tag is what caused the query string to be generated.</span></span>

<span data-ttu-id="6cbf3-391">현재 열 제목 정렬 링크를 선택하면 **검색** 상자에서 필터 값이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-391">Currently, when a column heading sort link is selected, the filter value from the **Search** box is lost.</span></span> <span data-ttu-id="6cbf3-392">손실된 필터 값은 다음 섹션에서 수정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-392">The lost filter value is fixed in the next section.</span></span>

## <a name="add-paging-functionality-to-the-students-index-page"></a><span data-ttu-id="6cbf3-393">학생 인덱스 페이지에 페이징 기능 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-393">Add paging functionality to the Students Index page</span></span>

<span data-ttu-id="6cbf3-394">이 섹션에서는 페이징을 지원하기 위해 `PaginatedList` 클래스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-394">In this section, a `PaginatedList` class is created to support paging.</span></span> <span data-ttu-id="6cbf3-395">`PaginatedList` 클래스는 `Skip` 및 `Take` 문을 사용하여 테이블의 모든 행을 검색하는 대신 서버에 있는 데이터를 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-395">The `PaginatedList` class uses `Skip` and `Take` statements to filter data on the server instead of retrieving all rows of the table.</span></span> <span data-ttu-id="6cbf3-396">다음 그림에는 페이징 단추가 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-396">The following illustration shows the paging buttons.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="6cbf3-398">프로젝트 폴더에서 다음 코드로 `PaginatedList.cs`를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-398">In the project folder, create `PaginatedList.cs` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/PaginatedList.cs)]

<span data-ttu-id="6cbf3-399">이전 코드에서 `CreateAsync` 메서드는 페이지 크기 및 페이지 번호를 사용하고 적절한 `Skip` 및 `Take` 문을 `IQueryable`에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-399">The `CreateAsync` method in the preceding code takes page size and page number and applies the appropriate `Skip` and `Take` statements to the `IQueryable`.</span></span> <span data-ttu-id="6cbf3-400">`IQueryable`에서 `ToListAsync`를 호출하면 요청된 페이지만 포함하는 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-400">When `ToListAsync` is called on the `IQueryable`, it returns a List containing only the requested page.</span></span> <span data-ttu-id="6cbf3-401">**이전** 및 **다음** 페이징 단추를 사용 또는 사용하지 않도록 설정하는 데 `HasPreviousPage` 및 `HasNextPage` 속성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-401">The properties `HasPreviousPage` and `HasNextPage` are used to enable or disable **Previous** and **Next** paging buttons.</span></span>

<span data-ttu-id="6cbf3-402">`CreateAsync` 메서드는 `PaginatedList<T>`를 만드는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-402">The `CreateAsync` method is used to create the `PaginatedList<T>`.</span></span> <span data-ttu-id="6cbf3-403">생성자를 `PaginatedList<T>` 개체를 만들 수 없고, 생성자는 비동기 코드를 실행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-403">A constructor can't create the `PaginatedList<T>` object, constructors can't run asynchronous code.</span></span>

## <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="6cbf3-404">인덱스 메서드에 페이징 기능 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-404">Add paging functionality to the Index method</span></span>

<span data-ttu-id="6cbf3-405">*Students/Index.cshtml.cs*에서 `Student`의 형식을 `IList<Student>`에서 `PaginatedList<Student>`로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-405">In *Students/Index.cshtml.cs*, update the type of `Student` from `IList<Student>` to `PaginatedList<Student>`:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPageType)]

<span data-ttu-id="6cbf3-406">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-406">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage&highlight=1-4,7-14,41-999)]

<span data-ttu-id="6cbf3-407">이전 코드는 페이지 인덱스, 현재 `sortOrder` 및 `currentFilter`를 메서드 서명에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-407">The preceding code adds the page index, the current `sortOrder`, and the `currentFilter` to the method signature.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage2)]

<span data-ttu-id="6cbf3-408">모든 매개 변수는 다음 경우에 null입니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-408">All the parameters are null when:</span></span>

* <span data-ttu-id="6cbf3-409">페이지가 **학생** 링크에서 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-409">The page is called from the **Students** link.</span></span>
* <span data-ttu-id="6cbf3-410">사용자가 페이징 또는 정렬 링크를 클릭하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-410">The user hasn't clicked a paging or sorting link.</span></span>

<span data-ttu-id="6cbf3-411">페이징 링크를 클릭하면 페이지 인덱스 변수에 표시할 페이지 번호가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-411">When a paging link is clicked, the page index variable contains the page number to display.</span></span>

<span data-ttu-id="6cbf3-412">`CurrentSort`는 Razor 페이지를 현재 정렬 순서로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-412">`CurrentSort` provides the Razor Page with the current sort order.</span></span> <span data-ttu-id="6cbf3-413">현재 정렬 순서는 페이징하는 동안 정렬 순서를 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-413">The current sort order must be included in the paging links to keep the sort order while paging.</span></span>

<span data-ttu-id="6cbf3-414">`CurrentFilter`는 Razor 페이지를 현재 필터 문자열로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-414">`CurrentFilter` provides the Razor Page with the current filter string.</span></span> <span data-ttu-id="6cbf3-415">`CurrentFilter` 값은:</span><span class="sxs-lookup"><span data-stu-id="6cbf3-415">The `CurrentFilter` value:</span></span>

* <span data-ttu-id="6cbf3-416">페이징하는 동안 필터 설정을 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-416">Must be included in the paging links in order to maintain the filter settings during paging.</span></span>
* <span data-ttu-id="6cbf3-417">페이지를 다시 표시하는 경우 텍스트 상자에 복원되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-417">Must be restored to the text box when the page is redisplayed.</span></span>

<span data-ttu-id="6cbf3-418">검색 문자열이 페이징하는 동안 변경되면 페이지가 1로 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-418">If the search string is changed while paging, the page is reset to 1.</span></span> <span data-ttu-id="6cbf3-419">새 필터로 인해 다른 데이터가 표시될 수 있으므로 페이지는 1로 재설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-419">The page has to be reset to 1 because the new filter can result in different data to display.</span></span> <span data-ttu-id="6cbf3-420">검색 값을 입력하는 경우 및 **전송**을 선택한 경우:</span><span class="sxs-lookup"><span data-stu-id="6cbf3-420">When a search value is entered and **Submit** is selected:</span></span>

* <span data-ttu-id="6cbf3-421">검색 문자열이 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-421">The search string is changed.</span></span>
* <span data-ttu-id="6cbf3-422">`searchString` 매개 변수가 null이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-422">The `searchString` parameter isn't null.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage3)]

<span data-ttu-id="6cbf3-423">`PaginatedList.CreateAsync` 메서드가 학생 쿼리를 페이징을 지원하는 컬렉션 형식의 단일 학생 페이지로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-423">The `PaginatedList.CreateAsync` method converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="6cbf3-424">해당 단일 학생 페이지가 Razor 페이지에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-424">That single page of students is passed to the Razor Page.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage4)]

<span data-ttu-id="6cbf3-425">`PaginatedList.CreateAsync`에서 두 개의 물음표는 [Null 병합 연산자](/dotnet/csharp/language-reference/operators/null-conditional-operator)를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-425">The two question marks in `PaginatedList.CreateAsync` represent the [null-coalescing operator](/dotnet/csharp/language-reference/operators/null-conditional-operator).</span></span> <span data-ttu-id="6cbf3-426">Null 병합 연산자는 null 허용 형식에 대한 기본값을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-426">The null-coalescing operator defines a default value for a nullable type.</span></span> <span data-ttu-id="6cbf3-427">식 `(pageIndex ?? 1)`은 값이 있는 경우 `pageIndex`의 값을 반환함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-427">The expression `(pageIndex ?? 1)` means return the value of `pageIndex` if it has a value.</span></span> <span data-ttu-id="6cbf3-428">`pageIndex`에 값이 없으면 1을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-428">If `pageIndex` doesn't have a value, return 1.</span></span>

## <a name="add-paging-links-to-the-student-razor-page"></a><span data-ttu-id="6cbf3-429">학생 Razor 페이지에 페이징 링크 추가</span><span class="sxs-lookup"><span data-stu-id="6cbf3-429">Add paging links to the student Razor Page</span></span>

<span data-ttu-id="6cbf3-430">*Students/Index.cshtml*의 표시를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-430">Update the markup in *Students/Index.cshtml*.</span></span> <span data-ttu-id="6cbf3-431">변경 내용은 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-431">The changes are highlighted:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?highlight=28-31,37-40,68-999)]

<span data-ttu-id="6cbf3-432">열 제목 링크는 쿼리 문자열을 사용하여 현재 검색 문자열을 `OnGetAsync` 메서드에 전달하므로 사용자가 필터 결과 내에서 정렬할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-432">The column header links use the query string to pass the current search string to the `OnGetAsync` method so that the user can sort within filter results:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?range=28-31)]

<span data-ttu-id="6cbf3-433">태그 도우미에 페이징 단추가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-433">The paging buttons are displayed by tag helpers:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?range=72-)]

<span data-ttu-id="6cbf3-434">앱을 실행하고 학생 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-434">Run the app and navigate to the students page.</span></span>

* <span data-ttu-id="6cbf3-435">페이징이 작동하는지 확인하려면 다른 정렬 순서의 페이징 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-435">To make sure paging works, click the paging links in different sort orders.</span></span>
* <span data-ttu-id="6cbf3-436">정렬 및 필터링을 통해 페이징이 제대로 작동하는지 확인하려면 검색 문자열을 입력하고 페이징을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-436">To verify that paging works correctly with sorting and filtering, enter a search string and try paging.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="6cbf3-438">코드를 더 잘 이해하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-438">To get a better understanding of the code:</span></span>

* <span data-ttu-id="6cbf3-439">*Students/Index.cshtml.cs*에서 `switch (sortOrder)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-439">In *Students/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="6cbf3-440">`NameSort`, `DateSort`, `CurrentSort` 및 `Model.Student.PageIndex`에 대한 조사식을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-440">Add a watch for `NameSort`, `DateSort`, `CurrentSort`, and `Model.Student.PageIndex`.</span></span>
* <span data-ttu-id="6cbf3-441">*Students/Index.cshtml*에서 `@Html.DisplayNameFor(model => model.Student[0].LastName)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-441">In *Students/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="6cbf3-442">디버거를 단계별로 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-442">Step through the debugger.</span></span>

## <a name="update-the-about-page-to-show-student-statistics"></a><span data-ttu-id="6cbf3-443">학생 통계를 표시하도록 정보 페이지를 업데이트</span><span class="sxs-lookup"><span data-stu-id="6cbf3-443">Update the About page to show student statistics</span></span>

<span data-ttu-id="6cbf3-444">이 단계에서는 각 등록 날짜에 대해 등록한 학생 수를 표시하도록 *Pages/About.cshtml*을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-444">In this step, *Pages/About.cshtml* is updated to display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="6cbf3-445">업데이트는 그룹화를 사용하며 다음 단계를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-445">The update uses grouping and includes the following steps:</span></span>

* <span data-ttu-id="6cbf3-446">**정보** 페이지에서 사용되는 데이터에 대한 보기 모델을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-446">Create a view model for the data used by the **About** Page.</span></span>
* <span data-ttu-id="6cbf3-447">정보 페이지를 업데이트하여 보기 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-447">Update the About page to use the view model.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="6cbf3-448">뷰 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="6cbf3-448">Create the view model</span></span>

<span data-ttu-id="6cbf3-449">*Models* 폴더에 *SchoolViewModels* 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-449">Create a *SchoolViewModels* folder in the *Models* folder.</span></span>

<span data-ttu-id="6cbf3-450">*SchoolViewModels* 폴더에서 다음 코드로 *EnrollmentDateGroup.cs*를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-450">In the *SchoolViewModels* folder, add a *EnrollmentDateGroup.cs* with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Models/SchoolViewModels/EnrollmentDateGroup.cs)]

### <a name="update-the-about-page-model"></a><span data-ttu-id="6cbf3-451">페이지 모델 정보 업데이트</span><span class="sxs-lookup"><span data-stu-id="6cbf3-451">Update the About page model</span></span>

<span data-ttu-id="6cbf3-452">ASP.NET Core 2.2의 웹 템플릿에는 정보 페이지가 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-452">The web templates in ASP.NET Core 2.2 do not include the About page.</span></span> <span data-ttu-id="6cbf3-453">ASP.NET Core 2.2를 사용하는 경우 Razor 정보 페이지를 만드세요.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-453">If you are using ASP.NET Core 2.2, create the About Razor Page.</span></span>

<span data-ttu-id="6cbf3-454">*Pages/About.cshtml.cs* 파일을 다음 코드로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-454">Update the *Pages/About.cshtml.cs* file with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/About.cshtml.cs)]

<span data-ttu-id="6cbf3-455">LINQ 문은 등록 날짜별로 학생 엔터티를 그룹화하고 각 그룹의 엔터티 수를 계산하며 결과를 `EnrollmentDateGroup` 뷰 모델 개체의 컬렉션에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-455">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

### <a name="modify-the-about-razor-page"></a><span data-ttu-id="6cbf3-456">Razor 페이지 정보 수정</span><span class="sxs-lookup"><span data-stu-id="6cbf3-456">Modify the About Razor Page</span></span>

<span data-ttu-id="6cbf3-457">*Pages/About.cshtml* 파일의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-457">Replace the code in the *Pages/About.cshtml* file with the following code:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/About.cshtml)]

<span data-ttu-id="6cbf3-458">앱을 실행하고 정보 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-458">Run the app and navigate to the About page.</span></span> <span data-ttu-id="6cbf3-459">각 등록 날짜에 대한 학생 수가 테이블에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-459">The count of students for each enrollment date is displayed in a table.</span></span>

<span data-ttu-id="6cbf3-460">해결할 수 없는 문제가 발생한 경우 [이 단계에 완성된 앱](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting)을 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-460">If you run into problems you can't solve, download the [completed app for this stage](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span></span>

![정보 페이지](sort-filter-page/_static/about.png)

## <a name="additional-resources"></a><span data-ttu-id="6cbf3-462">추가 자료</span><span class="sxs-lookup"><span data-stu-id="6cbf3-462">Additional resources</span></span>

* [<span data-ttu-id="6cbf3-463">ASP.NET Core 2.x 소스 디버깅</span><span class="sxs-lookup"><span data-stu-id="6cbf3-463">Debugging ASP.NET Core 2.x source</span></span>](https://github.com/dotnet/AspNetCore.Docs/issues/4155)
* [<span data-ttu-id="6cbf3-464">이 자습서의 YouTube 버전</span><span class="sxs-lookup"><span data-stu-id="6cbf3-464">YouTube version of this tutorial</span></span>](https://www.youtube.com/watch?v=MDs7PFpoMqI)

<span data-ttu-id="6cbf3-465">다음 자습서에서는 앱은 마이그레이션을 사용하여 데이터 모델을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="6cbf3-465">In the next tutorial, the app uses migrations to update the data model.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6cbf3-466">[이전](xref:data/ef-rp/crud)
> [다음](xref:data/ef-rp/migrations)</span><span class="sxs-lookup"><span data-stu-id="6cbf3-466">[Previous](xref:data/ef-rp/crud)
[Next](xref:data/ef-rp/migrations)</span></span>

::: moniker-end

